{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Table Games Event Schema",
  "description": "Schema for casino table games events (blackjack, craps, roulette, baccarat, poker)",
  "type": "object",
  "required": [
    "event_id",
    "table_id",
    "game_type",
    "event_type",
    "event_timestamp"
  ],
  "properties": {
    "event_id": {
      "type": "string",
      "format": "uuid",
      "description": "Unique identifier for this event"
    },
    "table_id": {
      "type": "string",
      "description": "Unique identifier for the table",
      "pattern": "^TBL-[A-Z]{2}-[0-9]{3}$"
    },
    "game_type": {
      "type": "string",
      "enum": ["BLACKJACK", "CRAPS", "ROULETTE", "BACCARAT", "POKER"],
      "description": "Type of table game"
    },
    "event_type": {
      "type": "string",
      "enum": [
        "GAME_START",
        "GAME_END",
        "BET_PLACED",
        "HAND_COMPLETE",
        "WIN",
        "LOSS",
        "PUSH",
        "SURRENDER",
        "DEALER_CHANGE",
        "TABLE_OPEN",
        "TABLE_CLOSE",
        "MARKER_ISSUED",
        "CHIP_FILL",
        "CHIP_CREDIT"
      ],
      "description": "Type of event"
    },
    "event_timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "Timestamp when event occurred"
    },
    "player_id": {
      "type": ["string", "null"],
      "description": "Player identifier (if applicable)"
    },
    "dealer_id": {
      "type": ["string", "null"],
      "description": "Dealer identifier"
    },
    "pit_id": {
      "type": ["string", "null"],
      "description": "Pit/gaming area identifier"
    },
    "bet_amount": {
      "type": ["number", "null"],
      "minimum": 0,
      "description": "Amount wagered (if applicable)"
    },
    "win_amount": {
      "type": ["number", "null"],
      "minimum": 0,
      "description": "Amount won (if applicable)"
    },
    "chip_count": {
      "type": ["integer", "null"],
      "minimum": 0,
      "description": "Number of chips involved"
    },
    "hand_number": {
      "type": ["integer", "null"],
      "minimum": 1,
      "description": "Hand number within session"
    },
    "cards_dealt": {
      "type": ["string", "null"],
      "description": "Cards dealt (encoded format)",
      "examples": ["AS-KH", "7D-8C-3S"]
    },
    "outcome": {
      "type": ["string", "null"],
      "enum": ["WIN", "LOSS", "PUSH", "BLACKJACK", "BUST", "SURRENDER", null],
      "description": "Outcome of the hand"
    },
    "session_id": {
      "type": ["string", "null"],
      "format": "uuid",
      "description": "Gaming session identifier"
    },
    "seat_position": {
      "type": ["integer", "null"],
      "minimum": 1,
      "maximum": 8,
      "description": "Player seat position at table"
    },
    "game_specific": {
      "type": ["object", "null"],
      "description": "Game-specific attributes",
      "properties": {
        "blackjack": {
          "type": "object",
          "properties": {
            "split": { "type": "boolean" },
            "double_down": { "type": "boolean" },
            "insurance": { "type": "boolean" },
            "dealer_upcard": { "type": "string" }
          }
        },
        "craps": {
          "type": "object",
          "properties": {
            "dice_result": { "type": "array", "items": { "type": "integer" } },
            "point": { "type": ["integer", "null"] },
            "bet_type": { "type": "string" }
          }
        },
        "roulette": {
          "type": "object",
          "properties": {
            "winning_number": { "type": "integer", "minimum": 0, "maximum": 36 },
            "color": { "type": "string", "enum": ["RED", "BLACK", "GREEN"] },
            "bet_type": { "type": "string" }
          }
        },
        "baccarat": {
          "type": "object",
          "properties": {
            "player_hand_value": { "type": "integer" },
            "banker_hand_value": { "type": "integer" },
            "third_card_drawn": { "type": "boolean" }
          }
        },
        "poker": {
          "type": "object",
          "properties": {
            "hand_rank": { "type": "string" },
            "pot_size": { "type": "number" },
            "position": { "type": "string" }
          }
        }
      }
    }
  },
  "additionalProperties": false
}
